<!DOCTYPE html>
<html>
<head>
<title>Plakattekontroller</title>

<script src="Tree.js" type="javascript"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
canvas {
    border:1px solid #d3d3d3;
    background-image: url("grass.png");
}

</style>
</head>
<body onload="startGame()">
<script>
var mycara;
var mycarb;
var mycarc;
var mycard;

var maxg=0.01;
var ming=0.005;

var maxY=600;
var minY=350;
var maxX=20;
var minX=800;
var trees = [];
var ntrees = 4;
var posY;
var posX;



function startGame() {
  for (var i = 0; i < ntrees; i++) {
    posY= Math.random() * (maxY - minY) + minY;
    posX= Math.random() * (maxX - minX) + minX;
    trees.push(new Tree(100, 100, "tree.png", posX, posY));
  }
    //trees.push(new Tree(100, 100, "tree.png", posX, posY));
    mycara= new Auto(100, 100, "car.png",20,400);
    mycarb= new Auto(100, 100, "car.png",20,450);
    mycarc= new Auto(100, 100, "car.png",20,500);
    mycard= new Auto(100, 100, "car.png",20,550);

    mycara.gravity= Math.random() * (maxg - ming) + ming;
    mycarb.gravity= Math.random() * (maxg - ming) + ming;
    mycarc.gravity= Math.random() * (maxg - ming) + ming;
    mycard.gravity= Math.random() * (maxg - ming) + ming;

    myGameArea.start();
}
var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 960;
        this.canvas.height = 701;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.frameNo = 0;
        this.interval = setInterval(updateGameArea, 20);
      },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}
function Auto (width, height, src, x, y,a) {

  this.image = new Image();              //Attribute
  this.image.src = src;
  this.width = width;
  this.height = height;
  this.speedX = 0;
  this.speedY = 0;
  this.x = x;
  this.y = y;
  this.gravity = 0;
  this.gravitySpeed = 0;

  this.update = function() {
  ctx = myGameArea.context;
  ctx.drawImage(this.image,this.x,this.y,this.width, this.height);

  }
  this.newPos = function() {
      this.gravitySpeed += this.gravity;
      this.x += this.speedX + this.gravitySpeed;
      this.y += this.speedY ;

  }


}
function updateGameArea() {
    myGameArea.clear();
    myGameArea.frameNo += 1;



    mycara.newPos();
    mycara.update();

    mycarb.newPos();
    mycarb.update();

    mycarc.newPos();
    mycarc.update();

    mycard.newPos();
    mycard.update();

    for (var i = 0; i < ntrees; i++) {
      trees[i].update();
    }
    //myObstacles[i].update();
}
function everyinterval(n) {
    if ((myGameArea.frameNo / n) % 1 == 0) {return true;}
    return false;
}

function accelerate(n) {
    mycara.gravity=n;
    mycarb.gravity=n;
    mycarc.gravity=n;
    mycard.gravity=n;
}
function Tree (width, height, src, posX, posY,a) {
  this.width = width;
  this.height = height;
  this.speedX = 0;
  this.speedY = 0;
  this.x = posX;
  this.y = posY;
  this.gravity = 0;
  this.gravitySpeed = 0;
  this.image = new Image();              //Attribute
  this.image.src = src;

    this.update = function() {
        ctx = myGameArea.context;
        ctx.drawImage(this.image,
                this.x,
                this.y,
                this.width, this.height);

    }
    this.newPos = function() {
        this.gravitySpeed += this.gravity;
        this.x += this.speedX + this.gravitySpeed;
        this.y += this.speedY ;

    }


}

</script>
<br>
<button onmousedown="accelerate(-0.2)" onmouseup="accelerate(0.05)">ACCELERATE</button>
</body>
</html>
